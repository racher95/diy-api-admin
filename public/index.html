<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <title>DIY API Admin (v3)</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <h1>DIY API Admin <span class="muted">(v3 con eliminar)</span></h1>
    <fieldset>
      <legend>0) Conectar con tu API</legend>
      <label
        >API Base URL
        <input
          id="apiBase"
          placeholder="https://TU-USUARIO.github.io/diy-emercado-api/"
      /></label>
      <div class="actions">
        <button id="testApi">Probar conexión</button
        ><span id="apiStatus" class="muted"></span
        ><span id="apiDetected" class="pill"></span>
      </div>
    </fieldset>
    <fieldset>
      <legend>1) Subir imagen</legend>
      <label>Archivo <input type="file" id="file" /></label>
      <div class="row">
        <label
          >Carpeta (opcional)
          <input id="folder" placeholder="images/products" /></label
        ><label
          >Nombre de archivo <input id="filename" placeholder="p-4011.jpg"
        /></label>
      </div>
      <div class="actions">
        <button id="upload">Subir</button><span id="uploadStatus"></span>
      </div>
      <img id="preview" class="preview" />
    </fieldset>
    <fieldset>
      <legend>2) Categoría</legend>
      <div class="row">
        <label>ID <input id="catId" type="number" placeholder="201" /></label
        ><label
          >Nombre <input id="catName" placeholder="Carpintería DIY"
        /></label>
      </div>
      <div class="actions">
        <button id="loadCat">Cargar datos de esta ID</button
        ><span id="catPreview" class="muted"></span>
      </div>
      <label
        >Descripción <input id="catDesc" placeholder="Descripción corta"
      /></label>
      <label>Imagen de categoría</label>
      <div class="image-upload-section">
        <div class="actions">
          <div class="file-input-wrapper">
            <input type="file" id="catImageFile" accept="image/*" />
            Seleccionar imagen
          </div>
          <button type="button" id="uploadCatImage">Subir imagen</button>
          <span class="url-input-toggle" id="catUrlToggle">O usar URL</span>
        </div>
        <div id="catUrlSection" style="display: none">
          <label
            >Imagen (URL)
            <input id="catImg" placeholder="https://.../images/cats/c-201.jpg"
          /></label>
        </div>
        <div id="catImagePreview" class="image-grid"></div>
      </div>
      <div class="actions">
        <button id="saveCat">Guardar categoría</button
        ><button id="deleteCat" class="danger-btn">Eliminar categoría</button>
        <label class="inline"
          ><input type="checkbox" id="cascadeCat" /> Eliminar también productos
          de esta categoría</label
        ><span id="catStatus"></span>
      </div>
    </fieldset>
    <fieldset>
      <legend>3) Producto</legend>
      <div class="row3">
        <label>ID <input id="pId" type="number" placeholder="4011" /></label
        ><label
          >Categoría ID
          <input id="pCatId" type="number" placeholder="201" /></label
        ><label
          >Categoria nombre <input id="pCatName" placeholder="Carpintería DIY"
        /></label>
      </div>
      <div class="actions">
        <button id="loadProd">Cargar datos de producto</button
        ><span id="prodPreview" class="muted"></span>
      </div>
      <div class="row">
        <label
          >Nombre <input id="pName" placeholder="Estantería hexagonal" /></label
        ><label
          >Precio (cost) <input id="pCost" type="number" placeholder="12990"
        /></label>
      </div>
      <label
        >Descripción
        <textarea id="pDesc" rows="3" placeholder="Descripción…"></textarea>
      </label>
      <label>Imágenes del producto</label>
      <div class="image-upload-section">
        <div class="actions">
          <div class="file-input-wrapper">
            <input type="file" id="pImageFiles" accept="image/*" multiple />
            Seleccionar imágenes
          </div>
          <button type="button" id="uploadProdImages">Subir imágenes</button>
          <span class="url-input-toggle" id="prodUrlToggle">O usar URLs</span>
        </div>
        <div id="prodUrlSection" style="display: none">
          <div class="row">
            <label
              >Imagen principal (URL)
              <input
                id="pImg"
                placeholder="https://.../images/products/p-4011.jpg"
            /></label>
            <label
              >Imágenes extra (URLs separadas por coma)
              <input
                id="pImgs"
                placeholder="https://.../p-4011.jpg, https://.../p-4011-2.jpg"
            /></label>
          </div>
        </div>
        <div id="prodImagePreview" class="image-grid"></div>
      </div>
      <div class="row">
        <label
          >Vendidos (soldCount)
          <input id="pSold" type="number" value="0" /></label
        ><label>Moneda (currency) <input id="pCurr" value="UYU" /></label>
      </div>
      <div class="actions">
        <button id="saveProd">Guardar producto</button
        ><button id="deleteProd" class="danger-btn">Eliminar producto</button
        ><span id="pStatus"></span>
      </div>
    </fieldset>
    <script src="admin.js"></script>
  </body>
</html>
